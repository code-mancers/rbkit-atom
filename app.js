// Generated by CoffeeScript 1.7.1
var grapher, msgpack, subSocket, zmq;

zmq = require('zmq');

msgpack = require('msgpack');

subSocket = zmq.socket('sub');

subSocket.connect('tcp://127.0.0.1:5555');

subSocket.subscribe('');

subSocket.on('message', function(data) {
  var unpackedData;
  unpackedData = msgpack.unpack(data);
  switch (unpackedData.event_type) {
    case 'obj_created':
      grapher.addData(unpackedData.payload);
      break;
    case "gc_stats":
      grapher.updateGcStats(unpackedData.payload);
  }
  return grapher.renderGraphAndLegend();
});

grapher = new Graph('#chart');
